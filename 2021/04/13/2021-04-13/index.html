<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.cat.net/css?family=Lato:300,300italic,400,400italic,700,700italic|Fira Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"swanq.top","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="0x01 前言在本篇随笔当中将会介绍什么是SQL注入，如何查找和利用SQL注入及如何防止SQL注入  0x02 SQL注入1. 原理：客户端提交的表单数据被拼接到数据库的查询语句当中,被当作SQL语句的一部分执行。 SQL injection is a web security vulnerability that allows an attacker to  interfere with que">
<meta property="og:type" content="article">
<meta property="og:title" content="一篇文章带你读懂sql注入">
<meta property="og:url" content="http://swanq.top/2021/04/13/2021-04-13/index.html">
<meta property="og:site_name" content="SwanQ&#39;s blog">
<meta property="og:description" content="0x01 前言在本篇随笔当中将会介绍什么是SQL注入，如何查找和利用SQL注入及如何防止SQL注入  0x02 SQL注入1. 原理：客户端提交的表单数据被拼接到数据库的查询语句当中,被当作SQL语句的一部分执行。 SQL injection is a web security vulnerability that allows an attacker to  interfere with que">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://swanq.top/2021/04/13/2021-04-13/1.jpg">
<meta property="article:published_time" content="2021-04-13T12:00:01.000Z">
<meta property="article:modified_time" content="2021-04-15T13:57:08.239Z">
<meta property="article:author" content="swanQ">
<meta property="article:tag" content="web安全">
<meta property="article:tag" content="网络安全">
<meta property="article:tag" content="SQL注入">
<meta property="article:tag" content="MYSQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://swanq.top/2021/04/13/2021-04-13/1.jpg">

<link rel="canonical" href="http://swanq.top/2021/04/13/2021-04-13/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>一篇文章带你读懂sql注入 | SwanQ's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">SwanQ's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">有趣的是有道理且新奇，胡思乱想并不有趣。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">19</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">3</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">10</span></a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/swanQs" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://swanq.top/2021/04/13/2021-04-13/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/author.jpg">
      <meta itemprop="name" content="swanQ">
      <meta itemprop="description" content="Try & Enjoy">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SwanQ's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          一篇文章带你读懂sql注入
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-13 20:00:01" itemprop="dateCreated datePublished" datetime="2021-04-13T20:00:01+08:00">2021-04-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-15 21:57:08" itemprop="dateModified" datetime="2021-04-15T21:57:08+08:00">2021-04-15</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="0x01-前言"><a href="#0x01-前言" class="headerlink" title="0x01 前言"></a>0x01 前言</h1><p>在本篇随笔当中将会介绍什么是SQL注入，如何查找和利用SQL注入及如何防止SQL注入</p>
<p><img src="/2021/04/13/2021-04-13/1.jpg"></p>
<h1 id="0x02-SQL注入"><a href="#0x02-SQL注入" class="headerlink" title="0x02 SQL注入"></a>0x02 SQL注入</h1><h2 id="1-原理："><a href="#1-原理：" class="headerlink" title="1. 原理："></a>1. 原理：</h2><p>客户端提交的表单数据被拼接到数据库的查询语句当中,被当作SQL语句的一部分执行。</p>
<p>SQL injection is a web security vulnerability that allows an attacker to  interfere with queries that an application  makes to its databases.It generally allows an attacker to view  data that not normally able to retrive.</p>
<h2 id="2-危害："><a href="#2-危害：" class="headerlink" title="2. 危害："></a>2. 危害：</h2><p>数据库信息泄漏、网页篡改、服务器被远程控制，被安装后门、网站被挂马，传播恶意软件(修改数据库一些字段的值，嵌入网马链接，进行挂马攻击)、数据库被恶意操作(数据库服务器被攻击，数据库的系统管理员帐户被窜改)、破坏硬盘数据，瘫痪全系统。</p>
<h2 id="3-相关-可跳过"><a href="#3-相关-可跳过" class="headerlink" title="3.相关(可跳过)"></a>3.相关(可跳过)</h2><h3 id="a-数据库分类："><a href="#a-数据库分类：" class="headerlink" title="a.数据库分类："></a>a.数据库分类：</h3><p>数据库分关系型数据库和非关系型数据库。</p>
<p><strong>关系型数据库</strong>：主要代表：Mysql、SQL Server、Oracle、PostgreSQL。关系型数据库是指采用了二维表格模型这种关系模型来组织数据的数据库。支持联表查询、使用正则表达式查询、嵌套查询，还可写独立的SQL脚本</p>
<p><strong>非关系型数据库</strong>：主要代表MongoDB，Redis、CouchDB。NoSQL非关系型数据库，主要指那些非关系型的、分布式的，且一般不保证ACID的数据存储系统。NoSQL以键值来存储，且结构不稳定，每个元组字段不同，不局限于固定结构，可以减少时间和空间开销。获取用户的不同信息时，仅需要根据key来取出对应的value值即可。</p>
<p>其中，</p>
<ul>
<li><p>PHP搭建的Web应用后端为MySQL</p>
</li>
<li><p>JSP搭建的Web应用后端为Oracle</p>
</li>
<li><p>ASP搭建的Web应用后端为MSSQL</p>
</li>
</ul>
<h3 id="b-常见函数："><a href="#b-常见函数：" class="headerlink" title="b.  常见函数："></a>b.  常见函数：</h3><ol>
<li><pre><code>1. version() MySQL 版本 select version()

2. user() 数据库用户名

3. database() 数据库名 select databases;

4. @@datadir 返回数据库的存储目录 select @@datadir;

5. @@version_compile_os 操作系统版本 select @@version_compile_os;

6. SQL 注释语句 (&quot;--&quot;与&quot;/*...*/&quot;)

   (1)#
   (2)--       表示单行注释
   (3) /*comment*/    用于多行(块)注释 
   (4)/*! MYSQL Special SQL */
    

7. concat(str1,str2,...) 没有分隔符地连接字符串，如有任何一个参数为NULL ，则返回值为 NULL

8. concat_ws(separator,str1,str2,...) 含有分隔符地连接字符串

9. group_concat(str1,str2,...) 连接一个组的所有字符串，并以逗号分隔每条数据

10. mid();  substr(); substring()-从一个字符串中截取指定数量的字符

11. limit()  从某个值开始，取出之后的N条数据的语法 (返回结果中的前几条数据或者中间的数据) select * from 表名 limit M,N;m是:指从m位开始(第一位为0)         n是:指取n条

12. order by 默认按照升序对记录进行排序， ORDER BY Company (DESC)

13. group by 结合合计函数，根据一个或多个列对结果集进行分组

14. sleep() select sleep(N)可以让此语句运行N秒钟

15. if() 语法：IF(expr1,expr2,expr3) 其中，expr1是判断条件，expr2和expr3是符合expr1的自定义的返回结果。

16. left() LEFT(str,len) 返回最左边的n个字符的字符串str，或NULL如果任何参数是NULL

17. count() COUNT(column_name) 语法 COUNT(column_name) 函数返回指定列的值的数目(NULL 不计入)

18. round()  四舍五入一个正数或者负数，结果为一定长度的值

19. hex() 16进制编码 select hex(&#39;dvwa&#39;)  //编码         select unhex(&#39;64767761&#39;)  //解码         

    select 0x64767761  //16进制解码

20. ascii(arg)/ord（arg） ：返回目标字符对应的ASCII码，注意：arg为单个字符。     语句：select ascii(‘a’)  

21. char(arg)：返回ASCII码只对应的字符     语句：select char（97）

22. hex()：将目标字符串装换成16进制格式的数据     语句： select hex(“dvwa”)

23. unhex()：将16进制格式的数据装换成原字符串
        语句：unhex(64767761) 

24. load_file()读取文件

25. floor()返回小于或等于X的最大整数

26. strcmp() 比较两个字符串ascii值的大小（大小写不敏感）

27. exp()返回e的X次方
28.  Mysql可以使用的空白字符：
    %09
    %0a
    %0b
    %0c
    %0d
    %20
    %a0
    /**/
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### c. 常用语句：</span><br><span class="line"></span><br><span class="line">- 查库</span><br><span class="line"></span><br></pre></td></tr></table></figure>
select schema_name from imformation_schema.schemata;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 查表</span><br><span class="line"></span><br></pre></td></tr></table></figure>
select schema_table from information_schema.tables where schema_name=&#39;security&#39;;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 查字段</span><br><span class="line"></span><br></pre></td></tr></table></figure>
select colunm_name from information_schema.colunms where table_name=users and table_schema=&#39;security&#39;;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 查数据</span><br><span class="line"></span><br></pre></td></tr></table></figure>
select * from security.users;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">## 4. 基本流程：</span><br><span class="line"></span><br><span class="line">1. 判断是否有注入点</span><br><span class="line">2. 获取数据库基本信息</span><br><span class="line">3. 获取数据库库名</span><br><span class="line">4. 获取数据库表名</span><br><span class="line">5. 获取数据库列名</span><br><span class="line">6. 获取用户信息</span><br><span class="line">7. 破解数据</span><br><span class="line">8. 提升权限</span><br><span class="line">9. 内网渗透</span><br><span class="line"></span><br><span class="line">## 5. 注入分类</span><br><span class="line"></span><br><span class="line">数字型注入:注入的参数为整数</span><br><span class="line"></span><br><span class="line">字符型注入：注入的参数为字符&#x2F;串</span><br><span class="line"></span><br><span class="line">POST注入：注入字段在POST数据中</span><br><span class="line"></span><br><span class="line">Cookie注入：注入字段在Cookie数据中</span><br><span class="line"></span><br><span class="line">延迟注入：使用数据库延迟特性进行注入</span><br><span class="line"></span><br><span class="line">搜索注入：在搜索栏中利用恶意代码进行注入</span><br><span class="line"></span><br><span class="line">base64注入：注入字符串经过base64加密</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 3. 注入分类：</span><br><span class="line"></span><br><span class="line">联合查询（union）注入、布尔盲注(base on boolian)、时间盲注(base on time)、报错信息注入、宽字节注入、偏移注入等。</span><br><span class="line"></span><br><span class="line">### 1.Retrieving hidden data</span><br><span class="line"></span><br><span class="line">[where子句的SQLi允许查询隐藏数据](https:&#x2F;&#x2F;ac991fcc1e603304800c031d001b00e5.web-security-academy.net&#x2F;filter?category&#x3D;Gifts)</span><br><span class="line"></span><br><span class="line">* 测试是否存在注入：&#39;   &#39;&#39;，内部服务器错误，存在sql注入。</span><br><span class="line"></span><br><span class="line">![](2.jpg)</span><br><span class="line"></span><br><span class="line">* 数据库正常查询语句：</span><br><span class="line"></span><br></pre></td></tr></table></figure>
SELECT * FROM products WHERE category = &#39;pets&#39; AND release = 1
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 加单&#x2F;双引号测试注入:内部服务器报错</span><br><span class="line"></span><br></pre></td></tr></table></figure>
SELECT * FROM products WHERE category = &#39;&#39;&#39; AND release = 1
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 加双连接符注释掉后面内容：无category为空的内容</span><br><span class="line"></span><br></pre></td></tr></table></figure>
SELECT * FROM products WHERE category = &#39;&#39;--&#39; AND release = 1
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 加入真命题，返回全部内容，包含发布与未发布的。release&#x3D;1代表已发布的。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
SELECT * FROM products WHERE category = &#39;&#39; or 1=1 --&#39; AND release = 1
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 2.Subverting application logic</span><br><span class="line"></span><br><span class="line">[登陆绕过](https:&#x2F;&#x2F;portswigger.net&#x2F;web-security&#x2F;sql-injection&#x2F;lab-login-bypass)</span><br><span class="line"></span><br><span class="line">![](5.jpg)</span><br><span class="line"></span><br><span class="line">与上面相同，这里不再过多赘述</span><br><span class="line"></span><br></pre></td></tr></table></figure>
正常查询语句：
SELECT firstname FROM users WHERE  username = &#39;administrator&#39; AND password = &#39;admin&#39;
测试：
SELECT firstname FROM users WHERE  username = &#39;&#39;&#39; AND password = &#39;admin&#39;
注释后成功注入：
SELECT firstname FROM users WHERE  username = &#39;administrator&#39;-- AND password = &#39;admin&#39;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 3.UNION attacks, where you can retrieve data from different database tables.</span><br><span class="line"></span><br><span class="line">从数据库表中检索数据：</span><br><span class="line"></span><br></pre></td></tr></table></figure>
正常查询：
SELECT name,description FROM products WHERE category = &#39;GIFTS&#39;
查询其他数据：
SELECT name,description FROM products WHERE category = &#39;&#39;UNION SELECT username, password FROM users--
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">union对原始查询结果追加多个额外的&#96;SELECT&#96;查询。必须满足：</span><br><span class="line"></span><br><span class="line">* 各个查询列数量相同。</span><br><span class="line">* 每个列中的数据类型相同。</span><br><span class="line"></span><br><span class="line">要进行union注入的前提是，知道原始查询返回的列数、原始查询中返回的哪些列的数据类型比较适合保存注入的结果。</span><br><span class="line"></span><br><span class="line">首先需要确定列数：</span><br><span class="line"></span><br></pre></td></tr></table></figure>
&#39; ORDER BY 1--
&#39; ORDER BY 2--
&#39; ORDER BY 3--
etc.
//NULL可以转换为每种常用的数据类型
&#39; UNION SELECT NULL--
&#39; UNION SELECT NULL,NULL--
&#39; UNION SELECT NULL,NULL,NULL--
etc.
</code></pre>
</li>
</ol>
<h3 id="4-Examining-the-database-where-you-can-extract-information-about-the-version-and-structure-of-the-database"><a href="#4-Examining-the-database-where-you-can-extract-information-about-the-version-and-structure-of-the-database" class="headerlink" title="4.Examining the database, where you can extract information about the version and structure of the database."></a>4.Examining the database, where you can extract information about the version and structure of the database.</h3><h3 id="5-Blind-SQL-injection"><a href="#5-Blind-SQL-injection" class="headerlink" title="5.Blind SQL injection"></a>5.Blind SQL injection</h3><h1 id="0x03-SQLMAP源码分析"><a href="#0x03-SQLMAP源码分析" class="headerlink" title="0x03 SQLMAP源码分析"></a>0x03 SQLMAP源码分析</h1>
    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>swanQ
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://swanq.top/2021/04/13/2021-04-13/" title="一篇文章带你读懂sql注入">http://swanq.top/2021/04/13/2021-04-13/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

	  <div>
      
       <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">你想在文章末尾对读者说的话</div>
    
</div>
      
      </div>
      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/web%E5%AE%89%E5%85%A8/" rel="tag"># web安全</a>
              <a href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" rel="tag"># 网络安全</a>
              <a href="/tags/SQL%E6%B3%A8%E5%85%A5/" rel="tag"># SQL注入</a>
              <a href="/tags/MYSQL/" rel="tag"># MYSQL</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/04/01/msf/" rel="prev" title="metasploit(MSF)初始化及常用命令">
      <i class="fa fa-chevron-left"></i> metasploit(MSF)初始化及常用命令
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/04/15/2021-04-15/" rel="next" title="一篇文章搞懂所有协议">
      一篇文章搞懂所有协议 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#0x01-%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">0x01 前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0x02-SQL%E6%B3%A8%E5%85%A5"><span class="nav-number">2.</span> <span class="nav-text">0x02 SQL注入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="nav-number">2.1.</span> <span class="nav-text">1. 原理：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E5%8D%B1%E5%AE%B3%EF%BC%9A"><span class="nav-number">2.2.</span> <span class="nav-text">2. 危害：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E7%9B%B8%E5%85%B3-%E5%8F%AF%E8%B7%B3%E8%BF%87"><span class="nav-number">2.3.</span> <span class="nav-text">3.相关(可跳过)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#a-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="nav-number">2.3.1.</span> <span class="nav-text">a.数据库分类：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#b-%E5%B8%B8%E8%A7%81%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="nav-number">2.3.2.</span> <span class="nav-text">b.  常见函数：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Examining-the-database-where-you-can-extract-information-about-the-version-and-structure-of-the-database"><span class="nav-number">2.3.3.</span> <span class="nav-text">4.Examining the database, where you can extract information about the version and structure of the database.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Blind-SQL-injection"><span class="nav-number">2.3.4.</span> <span class="nav-text">5.Blind SQL injection</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0x03-SQLMAP%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="nav-number">3.</span> <span class="nav-text">0x03 SQLMAP源码分析</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="swanQ"
      src="/images/author.jpg">
  <p class="site-author-name" itemprop="name">swanQ</p>
  <div class="site-description" itemprop="description">Try & Enjoy</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="sidebar-button motion-element"><i class="fa fa-comment"></i>
    聊天
  </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/swanQs" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;swanQs" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:zhuoma.swanq@foxmail.com" title="E-Mail → mailto:zhuoma.swanq@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">swanQ</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script size="300" alpha="0.6" zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
<script type="text/javascript" src="/js/src/clicklove.js"></script>
</html>
